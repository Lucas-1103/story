<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>ç¢§è¯åœ‹å°ï¼šéˆç•°æ•™å®¤</title>
    <style>
        body { background-color: #0d0d0d; color: #e0e0e0; font-family: "Microsoft JhengHei", sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; overflow: hidden; }
        #game-container { width: 90%; max-width: 600px; background: #1a1a1a; padding: 30px; border: 2px solid #444; box-shadow: 0 0 25px rgba(255, 0, 0, 0.3); border-radius: 12px; position: relative; }
        
        /* èªé€Ÿæ§åˆ¶é¢æ¿ */
        #settings { position: absolute; top: -50px; left: 0; background: #222; padding: 5px 15px; border-radius: 5px; font-size: 0.8rem; display: flex; align-items: center; gap: 10px; border: 1px solid #444; }
        
        #text { font-size: 1.25rem; line-height: 1.8; margin-bottom: 25px; color: #ccc; text-shadow: 1px 1px 2px #000; }
        .btn-container { display: flex; flex-direction: column; gap: 12px; }
        button { background: #333; color: #fff; border: 1px solid #555; padding: 12px; cursor: pointer; border-radius: 5px; font-size: 1rem; transition: 0.2s; }
        button:hover { background: #600; border-color: #f00; box-shadow: 0 0 10px #f00; }
        .highlight { color: #ff4444; font-weight: bold; }
        input[type=range] { cursor: pointer; }
    </style>
</head>
<body>

<div id="game-container">
    <div id="settings">
        <label>ğŸ‘» èªé€Ÿï¼š</label>
        <input type="range" id="rate" min="0.5" max="2" value="0.8" step="0.1">
        <span id="rate-value">0.8</span>
    </div>

    <div id="text">é»æ“Šä¸‹æ–¹æŒ‰éˆ•é–‹å§‹å†’éšª...</div>
    <div id="option-buttons" class="btn-container">
        <button onclick="startGame()">é€²å…¥ç¢§è¯åœ‹å°</button>
    </div>
</div>

<script>
    const textElement = document.getElementById('text');
    const optionButtonsElement = document.getElementById('option-buttons');
    const rateInput = document.getElementById('rate');
    const rateValue = document.getElementById('rate-value');

    // æ›´æ–°é¡¯ç¤ºçš„èªé€Ÿæ•¸å€¼
    rateInput.oninput = () => rateValue.innerText = rateInput.value;

    function speak(message) {
        // å…ˆåœæ­¢ä¹‹å‰çš„èªéŸ³ï¼Œé¿å…é‡ç–Š
        window.speechSynthesis.cancel();
        
        // ç§»é™¤ HTML æ¨™ç±¤åªè®€å–æ–‡å­—
        const plainText = message.replace(/<[^>]*>/g, '');
        const utterance = new SpeechSynthesisUtterance(plainText);
        
        utterance.lang = 'zh-TW';
        utterance.rate = rateInput.value; // è¨­å®šèªé€Ÿ
        utterance.pitch = 0.5; // èª¿ä½éŸ³èª¿å¢åŠ ææ€–æ„Ÿ (0 åˆ° 2)
        
        window.speechSynthesis.speak(utterance);
    }

    function startGame() {
        showTextNode(1);
    }

    function showTextNode(textNodeIndex) {
        const textNode = textNodes.find(node => node.id === textNodeIndex);
        textElement.innerHTML = textNode.text;
        
        // åŸ·è¡ŒèªéŸ³
        speak(textNode.text);
        
        while (optionButtonsElement.firstChild) {
            optionButtonsElement.removeChild(optionButtonsElement.firstChild);
        }

        textNode.options.forEach(option => {
            const button = document.createElement('button');
            button.innerText = option.text;
            button.onclick = () => {
                if (option.nextText === -1) {
                    startGame();
                } else {
                    showTextNode(option.nextText);
                }
            };
            optionButtonsElement.appendChild(button);
        });
    }

    const textNodes = [
        {
            id: 1,
            text: "ä½ é€²å…¥äº†ç©ºç„¡ä¸€äººçš„ä¸‰å¹´ä¸€ç­æ•™å®¤ã€‚é»‘æ¿ä¸Šå‡ºç¾ä¸€é“æ•¸å­¸é¡Œï¼Œè‹¥ä¸è§£é–‹ï¼Œæ•™å®¤é–€å°‡æ°¸é é–æ­»ã€‚",
            options: [
                { text: "æŸ¥çœ‹é¡Œç›®", nextText: 2 }
            ]
        },
        {
            id: 2,
            text: "é»‘æ¿ä¸Šå¯«è‘—ï¼šã€<span class='highlight'>24 ä¹˜ä»¥ 5 ç­‰æ–¼å¤šå°‘ï¼Ÿ</span>ã€ã€‚è§’è½å‚³ä¾†é™°å†·çš„ç¬‘è²...",
            options: [
                { text: "100", nextText: 11 },
                { text: "120", nextText: 3 },
                { text: "140", nextText: 11 }
            ]
        },
        {
            id: 3,
            text: "ç­”å°äº†ã€‚é–€é–ã€Œå–€æ“¦ã€ä¸€è²æ‰“é–‹äº†ã€‚ä½ ç²å¾—äº†é€šå¾€åœ–æ›¸é¤¨çš„æ¬Šé™ã€‚",
            options: [
                { text: "ç¹¼çºŒå‰å¾€åœ–æ›¸é¤¨", nextText: 4 }
            ]
        },
        {
            id: 11,
            text: "ã€ç®—éŒ¯äº†...é™ªæˆ‘ä¸€èµ·ç•™ç´šå§...ã€ä¸€éš»å†°å†·çš„æ‰‹æŠ“ä½äº†ä½ çš„è…³è¸ã€‚éŠæˆ²çµæŸã€‚",
            options: [
                { text: "é‡æ–°è¼ªè¿´", nextText: -1 }
            ]
        },
        {
            id: 4,
            text: "åœ–æ›¸é¤¨å…§æ›¸æ¶è‡ªè¡Œç§»å‹•...é€™è£¡ä¼¼ä¹æœ‰é—œæ–¼èªæ–‡çš„è€ƒé©—ã€‚ (å¾…çºŒ)",
            options: [
                { text: "å›æ ¡é–€å£", nextText: -1 }
            ]
        }
    ];
</script>

</body>
</html>
